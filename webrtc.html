<video controls autoplay style="width:40%;"></video>

<script>

    var offerer, answerer
    const video = document.querySelector('video')

    /* offerer */
    function offererPeer(stream) {
        offerer = new RTCPeerConnection()
        offerer.addStream(stream)

        offerer.createOffer(offer => {
            offerer.setLocalDescription(offer)
            answererPeer(offer, stream)
        }, onSdpError)
    }

    /* answerer */
    function answererPeer(offer, stream) {
        answerer = new RTCPeerConnection()
        answerer.addStream(stream)

        answerer.onaddstream = event => {
            video.srcObject = event.stream
        };

        answerer.onicecandidate = event => {
            if (!event || !event.candidate) return
            offerer.addIceCandidate(event.candidate)
        };

        answerer.setRemoteDescription(offer, onSdpSucces, onSdpError)
        answerer.createAnswer(answer => {
            answerer.setLocalDescription(answer)
            offerer.setRemoteDescription(answer, onSdpSucces, onSdpError)
        }, onSdpError)
    }

    const onSdpError = (e) => console.error('Sdp Error', e)
    const onSdpSucces = () => console.log('Sdp Succes')

    const constraints = {
        audio: false,
        video: {
            width: { max: 1920 },
            height: { max: 1080 },
            frameRate: { max: 10 }
        }
    }

    navigator.mediaDevices.getDisplayMedia(constraints).then(offererPeer)
</script>